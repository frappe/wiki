{"version":3,"file":"wiki.min.js","sources":["../../../../apps/frappe/frappe/public/js/frappe/ui/alt_keyboard_shortcuts.js","../../../../apps/frappe/frappe/public/js/frappe/ui/keyboard.js","../../../../apps/wiki/wiki/www/editu.js"],"sourcesContent":["frappe.provide('frappe.ui.keys');\n\nlet shortcut_groups = new WeakMap();\nlet shortcut_group_list = [];\nfrappe.ui.keys.shortcut_groups = shortcut_groups;\n\nfrappe.ui.keys.get_shortcut_group = (parent) => {\n\t// parent must be an object\n\tif (!shortcut_groups.has(parent)) {\n\t\tshortcut_groups.set(parent, new frappe.ui.keys.AltShortcutGroup());\n\t}\n\treturn shortcut_groups.get(parent);\n};\n\nlet listener_added = false;\nlet $current_dropdown = null;\nlet $body = $(document.body);\n\nfrappe.ui.keys.bind_shortcut_group_event = () => {\n\tif (listener_added) return;\n\tlistener_added = true;\n\n\tfunction highlight_alt_shortcuts() {\n\t\tif ($current_dropdown) {\n\t\t\t$current_dropdown.addClass('alt-pressed');\n\t\t\t$body.removeClass('alt-pressed');\n\t\t} else {\n\t\t\t$body.addClass('alt-pressed');\n\t\t\t$current_dropdown && $current_dropdown.removeClass('alt-pressed');\n\t\t}\n\t}\n\n\tfunction unhighlight_alt_shortcuts() {\n\t\t$current_dropdown && $current_dropdown.removeClass('alt-pressed');\n\t\t$body.removeClass('alt-pressed');\n\t}\n\n\t$(document).on('keydown', (e) => {\n\t\tlet key = (frappe.ui.keys.key_map[e.which] || '').toLowerCase();\n\n\t\tif (key === 'alt') {\n\t\t\thighlight_alt_shortcuts();\n\t\t}\n\n\t\tif (e.shiftKey || e.ctrlKey || e.metaKey) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (key && e.altKey) {\n\t\t\tlet shortcut = get_shortcut_for_key(key);\n\t\t\tif (shortcut) {\n\t\t\t\te.preventDefault();\n\t\t\t\tshortcut.$target[0].click();\n\t\t\t}\n\t\t\thighlight_alt_shortcuts();\n\t\t}\n\t});\n\t$(document).on('keyup', (e) => {\n\t\tif (e.key === 'Alt') {\n\t\t\tunhighlight_alt_shortcuts();\n\t\t}\n\t});\n\t$(document).on('mousemove', () => {\n\t\tunhighlight_alt_shortcuts();\n\t});\n};\n\nfunction get_shortcut_for_key(key) {\n\t// Get the shortcut for combination of alt+key\n\t// Priority 1: Open dropdown\n\t// Priority 2: Current Page\n\n\tlet shortcuts = shortcut_group_list\n\t\t.filter(shortcut_group => key in shortcut_group.shortcuts_dict)\n\t\t.map(shortcut_group => shortcut_group.shortcuts_dict[key])\n\t\t.filter(shortcut => shortcut.$target.is(':visible'));\n\n\tlet shortcut = null;\n\n\tif ($current_dropdown && $current_dropdown.is('.open')) {\n\t\tshortcut = shortcuts.find(\n\t\t\tshortcut => $.contains($current_dropdown[0], shortcut.$target[0])\n\t\t);\n\t}\n\n\tif (shortcut) return shortcut;\n\n\tshortcut = shortcuts.find(\n\t\tshortcut => $.contains(window.cur_page.page.page.wrapper[0], shortcut.$target[0])\n\t);\n\n\treturn shortcut;\n}\n\nfrappe.ui.keys.AltShortcutGroup = class AltShortcutGroup {\n\tconstructor() {\n\t\tthis.shortcuts_dict = {};\n\t\t$current_dropdown = null;\n\t\tthis.bind_events();\n\t\tfrappe.ui.keys.bind_shortcut_group_event();\n\t\tshortcut_group_list.push(this);\n\t}\n\n\tbind_events() {\n\t\t$(document).on('show.bs.dropdown', (e) => {\n\t\t\t$current_dropdown && $current_dropdown.removeClass('alt-pressed');\n\t\t\tlet $target = $(e.target);\n\t\t\tif ($target.is('.dropdown, .btn-group')) {\n\t\t\t\t$current_dropdown = $target;\n\t\t\t}\n\t\t});\n\t\t$(document).on('hide.bs.dropdown', () => {\n\t\t\t$current_dropdown && $current_dropdown.removeClass('alt-pressed');\n\t\t\t$current_dropdown = null;\n\t\t});\n\t}\n\n\tadd($target, $text_el) {\n\t\tif (!$text_el) {\n\t\t\t$text_el = $target;\n\t\t}\n\t\tlet text_content = $text_el.text().trim();\n\t\tlet letters = text_content.split('');\n\t\t// first unused letter\n\t\tlet shortcut_letter = letters.find(letter => {\n\t\t\tletter = letter.toLowerCase();\n\t\t\tlet is_valid_char = letter >= 'a' && letter <= 'z';\n\t\t\treturn !this.is_taken(letter) && is_valid_char;\n\t\t});\n\t\tif (!shortcut_letter) {\n\t\t\t$text_el.attr('data-label', text_content);\n\t\t\treturn;\n\t\t}\n\t\tfor (let key in this.shortcuts_dict) {\n\t\t\tlet shortcut = this.shortcuts_dict[key];\n\t\t\tif (shortcut.text === text_content) {\n\t\t\t\tshortcut.$target = $target;\n\t\t\t\tshortcut.$text_el = $text_el;\n\t\t\t\tthis.underline_text(shortcut);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tlet shortcut = {\n\t\t\t$target,\n\t\t\t$text_el,\n\t\t\tletter: shortcut_letter,\n\t\t\ttext: text_content\n\t\t};\n\t\tthis.shortcuts_dict[shortcut_letter.toLowerCase()] = shortcut;\n\t\tthis.underline_text(shortcut);\n\t}\n\n\tunderline_text(shortcut) {\n\t\tshortcut.$text_el.attr('data-label', shortcut.text);\n\t\tlet underline_el_found = false;\n\t\tlet text_html = shortcut.text.split('').map(letter => {\n\t\t\tif (letter === shortcut.letter && !underline_el_found) {\n\t\t\t\tletter = `<span class=\"alt-underline\">${letter}</span>`;\n\t\t\t\tunderline_el_found = true;\n\t\t\t}\n\t\t\treturn letter;\n\t\t}).join('');\n\t\tlet original_text_html = shortcut.$text_el.html();\n\t\ttext_html = original_text_html.replace(shortcut.text.trim(), text_html.trim());\n\t\tshortcut.$text_el.html(text_html);\n\t}\n\n\tis_taken(letter) {\n\t\tlet is_in_global_shortcut = frappe.ui.keys.standard_shortcuts\n\t\t\t.filter(s => !s.page)\n\t\t\t.some(s => s.shortcut === `alt+${letter}`);\n\t\treturn letter in this.shortcuts_dict || is_in_global_shortcut;\n\t}\n};\n","import './alt_keyboard_shortcuts';\n\nfrappe.provide('frappe.ui.keys.handlers');\n\nfrappe.ui.keys.setup = function() {\n\t$(window).on('keydown', function(e) {\n\t\tvar key = frappe.ui.keys.get_key(e);\n\t\tif(frappe.ui.keys.handlers[key]) {\n\t\t\tvar out = null;\n\t\t\tfor(var i=0, l = frappe.ui.keys.handlers[key].length; i<l; i++) {\n\t\t\t\tvar handler = frappe.ui.keys.handlers[key][i];\n\t\t\t\tvar _out = handler.apply(this, [e]);\n\t\t\t\tif(_out===false) {\n\t\t\t\t\tout = _out;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t});\n}\n\nlet standard_shortcuts = [];\nfrappe.ui.keys.standard_shortcuts = standard_shortcuts;\nfrappe.ui.keys.add_shortcut = ({shortcut, action, description, page, target, condition, ignore_inputs = false} = {}) => {\n\tif (target instanceof jQuery) {\n\t\tlet $target = target;\n\t\taction = () => {\n\t\t\t$target[0].click();\n\t\t}\n\t}\n\tif (!condition) {\n\t\tcondition = () => true;\n\t}\n\tlet handler = (e) => {\n\t\tlet $focused_element = $(document.activeElement);\n\t\tlet is_input_focused = $focused_element.is('input, select, textarea, [contenteditable=true]');\n\t\tif (is_input_focused && !ignore_inputs) return;\n\t\tif (!condition()) return;\n\n\t\tif (!page || page.wrapper.is(':visible')) {\n\t\t\tlet prevent_default = action(e);\n\t\t\t// prevent default if true is explicitly returned\n\t\t\t// or nothing returned (undefined)\n\t\t\tif (prevent_default || prevent_default === undefined) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}\n\t};\n\t// monkey patch page to handler\n\thandler.page = page;\n\t// remove handler with the same page attached to it\n\tfrappe.ui.keys.off(shortcut, page);\n\t// attach new handler\n\tfrappe.ui.keys.on(shortcut, handler);\n\n\t// update standard shortcut list\n\tlet existing_shortcut_index = standard_shortcuts.findIndex(\n\t\ts => s.shortcut === shortcut\n\t);\n\tlet new_shortcut = { shortcut, action, description, page, condition };\n\tif (existing_shortcut_index === -1) {\n\t\tstandard_shortcuts.push(new_shortcut);\n\t} else {\n\t\tstandard_shortcuts[existing_shortcut_index] = new_shortcut;\n\t}\n}\n\nfrappe.ui.keys.show_keyboard_shortcut_dialog = () => {\n\tif (frappe.ui.keys.is_dialog_shown) return;\n\n\tlet global_shortcuts = standard_shortcuts.filter(shortcut => !shortcut.page);\n\tlet current_page_shortcuts = standard_shortcuts.filter(\n\t\tshortcut => shortcut.page && shortcut.page === window.cur_page.page.page);\n\n\tfunction generate_shortcuts_html(shortcuts, heading) {\n\t\tif (!shortcuts.length) {\n\t\t\treturn '';\n\t\t}\n\t\tlet html = shortcuts\n\t\t\t.filter(s => s.condition ? s.condition() : true)\n\t\t\t.map(shortcut => {\n\t\t\t\tlet shortcut_label = shortcut.shortcut\n\t\t\t\t\t.split('+')\n\t\t\t\t\t.map(frappe.utils.to_title_case)\n\t\t\t\t\t.join('+');\n\t\t\t\tif (frappe.utils.is_mac()) {\n\t\t\t\t\tshortcut_label = shortcut_label.replace('Ctrl', 'âŒ˜');\n\t\t\t\t}\n\t\t\t\treturn `<tr>\n\t\t\t\t\t<td width=\"40%\"><kbd>${shortcut_label}</kbd></td>\n\t\t\t\t\t<td width=\"60%\">${shortcut.description || ''}</td>\n\t\t\t\t</tr>`;\n\t\t\t}).join('');\n\t\thtml = `<h5 style=\"margin: 0;\">${heading}</h5>\n\t\t\t<table style=\"margin-top: 10px;\" class=\"table table-bordered\">\n\t\t\t\t${html}\n\t\t\t</table>`;\n\t\treturn html;\n\t}\n\n\tlet global_shortcuts_html = generate_shortcuts_html(global_shortcuts, __('Global Shortcuts'));\n\tlet current_page_shortcuts_html = generate_shortcuts_html(current_page_shortcuts, __('Page Shortcuts'));\n\n\tlet dialog = new frappe.ui.Dialog({\n\t\ttitle: __('Keyboard Shortcuts'),\n\t\ton_hide() {\n\t\t\tfrappe.ui.keys.is_dialog_shown = false;\n\t\t}\n\t});\n\n\tdialog.$body.append(global_shortcuts_html);\n\tdialog.$body.append(current_page_shortcuts_html);\n\tdialog.$body.append(`\n\t\t<div class=\"text-muted\">\n\t\t\t${__('Press Alt Key to trigger additional shortcuts in Menu and Sidebar')}\n\t\t</div>\n\t`);\n\n\tdialog.show();\n\tfrappe.ui.keys.is_dialog_shown = true;\n}\n\nfrappe.ui.keys.get_key = function(e) {\n\tvar keycode = e.keyCode || e.which;\n\tvar key = frappe.ui.keys.key_map[keycode] || String.fromCharCode(keycode);\n\n\tif(e.ctrlKey || e.metaKey) {\n\t\t// add ctrl+ the key\n\t\tkey = 'ctrl+' + key;\n\t}\n\tif(e.shiftKey) {\n\t\t// add ctrl+ the key\n\t\tkey = 'shift+' + key;\n\t}\n\tif (e.altKey) {\n\t\t// add alt+ the key\n\t\tkey = 'alt+' + key;\n\t}\n\tif (e.altKey && e.ctrlKey) {\n\t\t// add alt+ctrl+ the key or single key e.g f1,f2,etc..\n\t\treturn key.toLowerCase();\n\t}\n\treturn key.toLowerCase();\n}\n\nfrappe.ui.keys.on = function(key, handler) {\n\tif(!frappe.ui.keys.handlers[key]) {\n\t\tfrappe.ui.keys.handlers[key] = [];\n\t}\n\tfrappe.ui.keys.handlers[key].push(handler);\n}\n\nfrappe.ui.keys.off = function(key, page) {\n\tlet handlers = frappe.ui.keys.handlers[key];\n\tif (!handlers || handlers.length === 0) return;\n\tfrappe.ui.keys.handlers[key] = handlers.filter(h => {\n\t\tif (!page) return false;\n\t\treturn h.page !== page;\n\t});\n}\n\nfrappe.ui.keys.add_shortcut({\n\tshortcut: 'ctrl+s',\n\taction: function(e) {\n\t\tfrappe.app.trigger_primary_action();\n\t\te.preventDefault();\n\t\treturn false;\n\t},\n\tdescription: __('Trigger Primary Action'),\n\tignore_inputs: true\n});\n\nfrappe.ui.keys.add_shortcut({\n\tshortcut: 'ctrl+g',\n\taction: function(e) {\n\t\t$(\"#navbar-search\").focus();\n\t\te.preventDefault();\n\t\treturn false;\n\t},\n\tdescription: __('Open Awesomebar')\n});\n\nfrappe.ui.keys.add_shortcut({\n\tshortcut: 'ctrl+h',\n\taction: function(e) {\n\t\te.preventDefault();\n\t\t$('.navbar-home img').click();\n\t},\n\tdescription: __('Navigate Home')\n});\n\nfrappe.ui.keys.add_shortcut({\n\tshortcut: 'alt+s',\n\taction: function(e) {\n\t\te.preventDefault();\n\t\t$('.dropdown-navbar-user a').eq(0).click();\n\t},\n\tdescription: __('Open Settings')\n});\n\nfrappe.ui.keys.add_shortcut({\n\tshortcut: 'shift+/',\n\taction: function() {\n\t\tfrappe.ui.keys.show_keyboard_shortcut_dialog();\n\t},\n\tdescription: __('Show Keyboard Shortcuts')\n});\n\nfrappe.ui.keys.add_shortcut({\n\tshortcut: 'alt+h',\n\taction: function(e) {\n\t\te.preventDefault();\n\t\t$('.dropdown-help a').eq(0).click();\n\t},\n\tdescription: __('Open Help')\n});\n\nfrappe.ui.keys.on('escape', function(e) {\n\tclose_grid_and_dialog();\n});\n\nfrappe.ui.keys.on('esc', function(e) {\n\tclose_grid_and_dialog();\n});\n\nfrappe.ui.keys.on('enter', function(e) {\n\tif(window.cur_dialog && cur_dialog.confirm_dialog) {\n\t\tcur_dialog.get_primary_btn().trigger('click');\n\t}\n});\n\nfrappe.ui.keys.on('ctrl+down', function(e) {\n\tvar grid_row = frappe.ui.form.get_open_grid_form();\n\tgrid_row && grid_row.toggle_view(false, function() { grid_row.open_next() });\n});\n\nfrappe.ui.keys.on('ctrl+up', function(e) {\n\tvar grid_row = frappe.ui.form.get_open_grid_form();\n\tgrid_row && grid_row.toggle_view(false, function() { grid_row.open_prev() });\n});\n\nfrappe.ui.keys.add_shortcut({\n\tshortcut: 'shift+ctrl+r',\n\taction: function() {\n\t\tfrappe.ui.toolbar.clear_cache();\n\t},\n\tdescription: __('Clear Cache and Reload')\n});\n\nfrappe.ui.keys.key_map = {\n\t8: 'backspace',\n\t9: 'tab',\n\t13: 'enter',\n\t16: 'shift',\n\t17: 'ctrl',\n\t91: 'meta',\n\t18: 'alt',\n\t27: 'escape',\n\t37: 'left',\n\t39: 'right',\n\t38: 'up',\n\t40: 'down',\n\t32: 'space',\n\t112: 'f1',\n\t113: 'f2',\n\t114: 'f3',\n\t115: 'f4',\n\t116: 'f5',\n\t191: '/',\n\t188: '<',\n\t190: '>'\n}\n\n'abcdefghijklmnopqrstuvwxyz'.split('').forEach((letter, i) => {\n\tfrappe.ui.keys.key_map[65 + i] = letter;\n});\n\n// keyCode map\nfrappe.ui.keyCode = {\n\tESCAPE: 27,\n\tLEFT: 37,\n\tRIGHT: 39,\n\tUP: 38,\n\tDOWN: 40,\n\tENTER: 13,\n\tTAB: 9,\n\tSPACE: 32,\n\tBACKSPACE: 8\n}\n\nfunction close_grid_and_dialog() {\n\t// close open grid row\n\tvar open_row = $(\".grid-row-open\");\n\tif (open_row.length) {\n\t\tvar grid_row = open_row.data(\"grid_row\");\n\t\tgrid_row.toggle_view(false);\n\t\treturn false;\n\t}\n\n\t// close open dialog\n\tif (cur_dialog && !cur_dialog.no_cancel_flag) {\n\t\tcur_dialog.cancel();\n\t\treturn false;\n\t}\n}\n\n// blur when escape is pressed on dropdowns\n$(document).on('keydown', '.dropdown-toggle', (e) => {\n\tif (e.which === frappe.ui.keyCode.ESCAPE) {\n\t\t$(e.currentTarget).blur();\n\t}\n});\n","\n// import ClassicEditor from '@ckeditor/build-classic.js';\n\n// import Essentials from '@ckeditor/ckeditor5-essentials/src/essentials.js';\n// import Bold from './@ckeditor/ckeditor5-basic-styles/src/bold.js';\n// import Italic from './@ckeditor/ckeditor5-basic-styles/src/italic.js';\n// // ...\n\n// import Markdown from './@ckeditor/ckeditor5-markdown-gfm/src/markdown.js';\n\nimport  '../../../frappe/frappe/public/js/frappe/ui/keyboard.js'\n\n\n\nwindow.EditAsset = class EditAsset {\n  constructor(opts) {\n    console.log('checko')\n    this.edited_files = {};\n    this.make_code_field_group();\n    this.render_preview();\n    this.add_attachment_handler();\n    this.set_listeners();\n    this.create_comment_box()\n  }\n\n  render_preview() {\n\n    $('a[data-toggle=\"tab\"]').on(\"shown.bs.tab\", (e) => {\n      let activeTab = $(e.target);\n\n      if (\n        activeTab.prop(\"id\") === \"preview-tab\" ||\n        activeTab.prop(\"id\") === \"diff-tab\"\n      ) {\n        let content = $(\"textarea#content\").val();\n        let $preview = $(\".wiki-preview\");\n        let $diff = $(\".wiki-diff\");\n        if (!this.code_field_group.get_value(\"code\")) {\n          $preview.html(\"<div>Please select a route</div>\");\n          $diff.html(\"<div>Please select a route</div>\");\n          return;\n        }\n        $preview.html(\"Loading preview...\");\n        $diff.html(\"Loading diff...\");\n        frappe.call({\n          method: \"wiki.wiki.doctype.wiki_page.wiki_page.preview\",\n          args: {\n            content: this.code_field_group.get_value(\"code\"),\n            path: this.route,\n            name: $('[name=\"wiki_page\"]').val(),\n            attachments: this.attachments,\n            new: $('[name=\"new\"]').val(),\n          },\n          callback: (r) => {\n            if (r.message) {\n              $preview.html(r.message.html);\n              if ($('[name=\"new\"]').val()){\n                $diff.html(r.message.diff)\n              }\n            }\n          },\n        });\n      }\n    });\n  }\n\n  make_edit_field_group() {\n    const route = $(\"#route\").val();\n    this.edit_field_group = new frappe.ui.FieldGroup({\n      fields: [\n        {\n          label: __(\"Route Link\"),\n          fieldname: \"route_link\",\n          fieldtype: \"Data\",\n          default: route || \"\",\n          hidden: 1,\n        },\n      ],\n      body: $(\".routedisp\"),\n    });\n    this.edit_field_group.make();\n  }\n\n  make_code_field_group() {\n    this.code_field_group = new frappe.ui.FieldGroup({\n      fields: [\n        {\n          label: __(\"Edit Code\"),\n          fieldname: \"code\",\n          fieldtype: \"Code\",\n          columns: 4,\n          reqd: 1,\n          default: $('#content').val(),\n          options: \"Markdown\",\n        },\n      ],\n      body: $(\".wiki-write\").get(0),\n    });\n    this.code_field_group.make();\n  }\n\n  update_code(from_disk = false) {\n    const route = this.edit_field_group.get_value(\"route_link\");\n    if (this.route)\n      this.edited_files[this.route] = this.code_field_group.get_value(\"code\");\n    if (route === this.route && !from_disk) return;\n    if (route in this.edited_files && !from_disk) {\n      this.route = route;\n      this.code_field_group\n        .get_field(\"code\")\n        .set_value(this.edited_files[route]);\n      this.build_file_table();\n      return;\n    }\n    frappe.call({\n      method: \"edit_docs.www.edit.get_code\",\n      args: { route: route },\n      callback: (r) => {\n        this.route = route;\n        this.code_field_group.get_field(\"code\").set_value(r.message);\n        this.build_file_table();\n      },\n    });\n  }\n  make_submit_section_field_group() {\n    this.submit_section_field_group = new frappe.ui.FieldGroup({\n      fields: [\n        {\n          label: __(\"Submit\"),\n          fieldname: \"submit_button\",\n          fieldtype: \"Button\",\n          primary: 1,\n          btn_size: \"lg\",\n          reqd: 1,\n          click: () => this.raise_patch(),\n        },\n      ],\n      body: $(\".submit-section\"),\n    });\n    this.submit_section_field_group.make();\n  }\n\n  raise_patch() {\n\n    var me =this\n    const submit_dialog = frappe.ui.di\n\n\n\n    var dfs = [];\n        dfs.push({\n          fieldname: \"edit_message\",\n          fieldtype: \"Text\",\n        });\n    \n    let dialog = new frappe.ui.Dialog({\n      fields: dfs,\n      title: __(\"Please add a message explaining your change\"),\n      primary_action: function () {\n        console.log(this.get_value(\"edit_message\"))\n        frappe.call({\n          method: \"wiki.wiki.doctype.wiki_page.wiki_page.update\",\n          args: {\n            name: $('[name=\"wiki_page\"]').val(),\n            wiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n            message: this.get_value(\"edit_message\"),\n            content: me.code_field_group.get_value(\"code\"),\n            attachments: me.attachments,\n            new: $('[name=\"new\"]').val(),\n            title: $('[name=\"title_of_page\"]').val()\n\n          },\n          callback: (r) => {\n            frappe.show_alert(\n              \"A Change Request has been generated. You can track your requests here after a few mins\",\n              5\n            );\n            window.location.href = \"/contributions\";\n          },\n        });\n\n        this.hide()\n      },\n    });\n    dialog.show();\n\n\n\n\n\n   \n  }\n\n  add_attachment_handler() {\n    var me = this;\n    $(\".add-attachment\").click(function () {\n      me.new_attachment();\n    });\n    $(\".submit\").click(function () {\n      me.raise_patch();\n    });\n  }\n\n  new_attachment(fieldname) {\n    if (this.dialog) {\n      // remove upload dialog\n      this.dialog.$wrapper.remove();\n    }\n\n    new frappe.ui.FileUploader({\n      folder: \"Home/Attachments\",\n      on_success: (file_doc) => {\n        if (!this.attachments) this.attachments = [];\n        if (!this.save_paths) this.save_paths = {};\n        this.attachments.push(file_doc);\n        this.build_attachment_table();\n      },\n    });\n  }\n\n  build_attachment_table() {\n    var wrapper = $(\".wiki-attachment\");\n    wrapper.empty();\n\n    var table = $(\n      `<table class=\"table table-bordered attachment-table\" style=\"cursor:pointer; margin:0px;\">\n        <thead>\n        \t<tr>\n            <th style=\"width: 30%\">' ${__(\"File Name\")}</th>\n            <th style=\"width: 50%\">${__(\"Use this Url\")} </th>\n            <th>${__(\"Actions\")} </th>\n          </tr>\n        </thead>\n        <tbody></tbody>\n      </table>`\n    ).appendTo(wrapper);\n\n    this.attachments.forEach((f) => {\n      const row = $(\"<tr></tr>\").appendTo(table.find(\"tbody\"));\n      $(`<td>${f.file_name}</td>`).appendTo(row);\n      $(`<td>${f.file_url}</td>`).appendTo(\n        row\n      );\n      $(`<td>\n          <a class=\"btn btn-default btn-xs center delete-button\"  data-name = \"${f.file_name}\" >\n\t\t\t\t    Delete\n\t\t\t    </a>\n        </td>`).appendTo(row);\n    });\n\n    // table.on(\"click\", () => this.table_click_handler());\n  }\n\n  set_listeners() {\n    var me = this;\n    $(` .wiki-attachment `).on(\"click\", `.edit-button`, function () {\n      var dfs = [];\n      me.attachments.forEach((f) => {\n        if (f.file_name == $(this).attr(\"data-name\")) {\n          dfs.push({\n            fieldname: f.file_name,\n            fieldtype: \"Data\",\n            label: f.file_name,\n          });\n        }\n      });\n      let dialog = new frappe.ui.Dialog({\n        fields: dfs,\n        title: __(\"Add path where this file should be saved.\"),\n        primary_action: function () {\n          var values = this.get_values();\n          if (values) {\n            this.hide();\n            me.attachments.forEach((f) => {\n              f.save_path = values[f.file_name];\n              me.save_paths[f.file_name] = values[f.file_name];\n            });\n            me.build_attachment_table();\n          }\n        },\n      });\n      dialog.show();\n      dialog.set_values(me.save_paths);\n    });\n\n    $(` .wiki-attachment `).on(\"click\", `.delete-button`, function () {\n      frappe.confirm(\n        `Are you sure you want to delete the file \"${$(this).attr(\n          \"data-name\"\n        )}\"`,\n        () => {\n          // action to perform if Yes is selected\n          me.attachments.forEach((f, index, object) => {\n            if (f.file_name == $(this).attr(\"data-name\")) {\n              object.splice(index, 1);\n            }\n            me.build_attachment_table();\n          });\n        }\n      );\n    });\n\n    $(` .wiki-files `).on(\"click\", `.delete-button`, function () {\n      frappe.confirm(\n        `Are you sure you want to reset changes for this route \"${$(this).attr(\n          \"data-name\"\n        )}\"`,\n        () => {\n          // action to perform if Yes is selected\n\n          delete me.edited_files[$(this).attr(\"data-name\")];\n          me.build_file_table();\n        }\n      );\n    });\n\n    $(` .wiki-files `).on(\"click\", `.edit-button`, function () {\n      // action to perform if Yes is selected\n\n      me.edit_field_group\n        .get_field(\"route_link\")\n        .set_value($(this).attr(\"data-name\"))\n        .then(() => {\n          me.update_code();\n          $(\"#write-tab\").addClass(\"active\");\n          $(\"#files-tab\").removeClass(\"active\");\n          $(\"#write\").addClass(\"show active\");\n          $(\"#files\").removeClass(\"show active\");\n        });\n    });\n  }\n\n  build_file_table() {\n    var wrapper = $(\".wiki-files\");\n    wrapper.empty();\n    var table = $(\n      '<table class=\"table table-bordered\" style=\"cursor:pointer; margin:0px;\"><thead>\\\n\t<tr><th>' +\n        __(\"Route\") +\n        \"</th><th>\" +\n        __(\"Actions\") +\n        \"</th></tr>\\\n\t</thead><tbody></tbody></table>\"\n    ).appendTo(wrapper);\n\n    for (var file in this.edited_files) {\n      const row = $(\"<tr></tr>\").appendTo(table.find(\"tbody\"));\n      $(\"<td>\" + file + \"</td>\").appendTo(row);\n      $(`<td>\n      <a class=\"btn btn-default btn-xs center edit-button\"  data-name = \"${file}\" >\n        Edit\n      </a>\n      &nbsp&nbsp\n      <a class=\"btn btn-default btn-xs center delete-button\"  data-name = \"${file}\" >\n        Delete\n      </a>\n    </td>`).appendTo(row);\n    }\n    if (!(this.route in this.edited_files)) {\n      const row = $(\"<tr></tr>\").appendTo(table.find(\"tbody\"));\n      $(\"<td>\" + this.route + \"</td>\").appendTo(row);\n      $(`<td>\n      <a class=\"btn btn-default btn-xs center edit-button\"  data-name = \"${this.route}\" >\n        Edit\n      </a>\n      &nbsp&nbsp\n      <a class=\"btn btn-default btn-xs center delete-button\"  data-name = \"${this.route}\" >\n        Delete\n      </a>\n    </td>`).appendTo(row);\n    }\n  }\n\n  create_comment_box() {\n     this.comment_box = frappe.ui.form.make_control({\n      parent: $('.comment-box'),\n      df: {\n          fieldname: 'new_comment',\n          fieldtype: 'Comment'\n      },\n      enable_mentions: false,\n      render_input: true,\n      only_input: true,\n      on_submit: (comment) => {\n\n\t\t\t\tif (strip_html(comment).trim() != \"\") {\n          this.comment_box.disable();\n\n\n          frappe.call({\n            method: \"wiki.wiki.doctype.wiki_page_patch.wiki_page_patch.add_comment_to_patch\",\n            args: {\n              reference_name: $('[name=\"wiki_page_patch\"]').val(),\n              content: comment,\n              comment_email: frappe.session.user,\n              comment_by: frappe.session.user_fullname\n            },\n            callback: (r) => {\n              comment = r.message\n              if (comment) {\n                console.log(comment)\n                this.comment_box.set_value('');\n\n                \n                const new_comment = $(`\n                  <div class=\"timeline-item\">\n                    <div class=\"timeline-badge\">\n                      <svg class=\"icon icon-md\">\n                        <use href=\"#icon-small-message\"></use>\n                      </svg>\n                    </div>\n                    <div class=\"timeline-content frappe-card\">\n                      <div class=\"timeline-message-box\">\n                        <span class=\"flex justify-between\">\n                          <span class=\"text-color flex\">\n                            <span>\n                              ${comment.owner}\n                              <span class=\"text-muted margin-left\">\n                                <span class=\"frappe-timestamp \"\n                                  data-timestamp=\"${comment.creation}\"\n                                  title=\"${comment.creation}\">${ comment.timepassed }</span>\n                              </span>\n                            </span>\n                          </span>\n                        </span>\n                        <div class=\"content\">\n                          ${comment.content}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                `)\n\n                $(\".timeline-items\").prepend(new_comment)\n\n              }\n            },\n            always: () => {\n              this.comment_box.enable();\n\n            }\n          });\n\t\t\t\t}\n\t\t\t}\n  })\n  }\n}\n\n\n\n//   setup_search(target, search_scope) {\n//     if (typeof target === \"string\") {\n//       target = $(target);\n//     }\n\n//     let $search_input = $(`<div class=\"dropdown\" id=\"dropdownMenuSearch\">\n// \t\t\t<input type=\"search\" class=\"form-control\" placeholder=\"Search the docs (Press / to focus)\" />\n// \t\t\t<div class=\"overflow-hidden shadow dropdown-menu w-100\" aria-labelledby=\"dropdownMenuSearch\">\n// \t\t\t</div>\n// \t\t\t<div class=\"search-icon\">\n// \t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"\n// \t\t\t\t\tfill=\"none\"\n// \t\t\t\t\tstroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n// \t\t\t\t\tstroke-linejoin=\"round\"\n// \t\t\t\t\tclass=\"feather feather-search\">\n// \t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n// \t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line>\n// \t\t\t\t</svg>\n// \t\t\t</div>\n// \t\t</div>`);\n\n//     target.empty();\n//     $search_input.appendTo(target);\n\n//     // let $dropdown = $search_input.find('.dropdown');\n//     let $dropdown_menu = $search_input.find(\".dropdown-menu\");\n//     let $input = $search_input.find(\"input\");\n//     let dropdownItems;\n//     let offsetIndex = 0;\n\n//     $(document).on(\"keypress\", (e) => {\n//       if ($(e.target).is(\"textarea, input, select\")) {\n//         return;\n//       }\n//       if (e.key === \"/\") {\n//         e.preventDefault();\n//         $input.focus();\n//       }\n//     });\n\n//     $input.on(\n//       \"input\",\n//       frappe.utils.debounce(() => {\n//         if (!$input.val()) {\n//           clear_dropdown();\n//           return;\n//         }\n\n//         frappe\n//           .call({\n//             method: \"frappe.search.web_search\",\n//             args: {\n//               scope: search_scope || null,\n//               query: $input.val(),\n//               limit: 5,\n//             },\n//           })\n//           .then((r) => {\n//             let results = r.message || [];\n//             let dropdown_html;\n//             if (results.length == 0) {\n//               dropdown_html = `<div class=\"dropdown-item\">No results found</div>`;\n//             } else {\n//               dropdown_html = results\n//                 .map((r) => {\n//                   return `<a class=\"dropdown-item\" data-name=\"/${r.path}\">\n// \t\t\t\t\t\t<h6>${r.title_highlights || r.title}</h6>\n// \t\t\t\t\t\t<div style=\"white-space: normal;\">${r.content_highlights}</div>\n// \t\t\t\t\t</a>`;\n//                 })\n//                 .join(\"\");\n//             }\n//             $dropdown_menu.html(dropdown_html);\n//             $dropdown_menu.addClass(\"show\");\n//             dropdownItems = $dropdown_menu.find(\".dropdown-item\");\n\n//             var me = this;\n//             $dropdown_menu.on(\"click\", `.dropdown-item`, function () {\n//               var dfs = [];\n//               console.log($(this).attr(\"data-name\"));\n//               me.edit_field_group\n//                 .get_field(\"route_link\")\n//                 .set_value($(this).attr(\"data-name\"))\n//                 .then(() => {\n//                   me.update_code();\n//                   $(\"#write-tab\").addClass(\"active\");\n//                   $(\"#files-tab\").removeClass(\"active\");\n//                   $(\"#write\").addClass(\"show active\");\n//                   $(\"#files\").removeClass(\"show active\");\n//                 });\n//               clear_dropdown();\n//             });\n//           });\n//       }, 500)\n//     );\n\n//     $input.on(\"focus\", () => {\n//       if (!$input.val()) {\n//         clear_dropdown();\n//       } else {\n//         $input.trigger(\"input\");\n//       }\n//     });\n\n//     $input.keydown(function (e) {\n//       // up: 38, down: 40\n//       if (e.which == 40) {\n//         navigate(0);\n//       }\n//     });\n\n//     $dropdown_menu.keydown(function (e) {\n//       // up: 38, down: 40\n//       if (e.which == 38) {\n//         navigate(-1);\n//       } else if (e.which == 40) {\n//         navigate(1);\n//       } else if (e.which == 27) {\n//         setTimeout(() => {\n//           clear_dropdown();\n//         }, 300);\n//       }\n//     });\n\n//     // Clear dropdown when clicked\n//     $(window).click(function () {\n//       clear_dropdown();\n//     });\n\n//     $search_input.click(function (event) {\n//       event.stopPropagation();\n//     });\n\n//     // Navigate the list\n//     var navigate = function (diff) {\n//       offsetIndex += diff;\n\n//       if (offsetIndex >= dropdownItems.length) offsetIndex = 0;\n//       if (offsetIndex < 0) offsetIndex = dropdownItems.length - 1;\n//       $input.off(\"blur\");\n//       dropdownItems.eq(offsetIndex).focus();\n//     };\n\n//     function clear_dropdown() {\n//       offsetIndex = 0;\n//       $dropdown_menu.html(\"\");\n//       $dropdown_menu.removeClass(\"show\");\n//       dropdownItems = undefined;\n//     }\n\n//     // Remove focus state on hover\n//     $dropdown_menu.mouseover(function () {\n//       dropdownItems.blur();\n//     });\n//   }\n// }\n\n// let ismdwn = 0\n// rpanrResize.addEventListener('mousedown', mD)\n\n// function mD(event) {\n//   ismdwn = 1\n//   document.body.addEventListener('mousemove', mV)\n//   document.body.addEventListener('mouseup', end)\n// }\n\n// function mV(event) {\n//   if (ismdwn === 1) {\n//     pan1.style.flexBasis = event.clientX + \"px\"\n//   } else {\n//     end()\n//   }\n// }\n// const end = (e) => {\n//   ismdwn = 0\n//   document.body.removeEventListener('mouseup', end)\n//   rpanrResize.removeEventListener('mousemove', mV)\n// }\n\n\n\n\n// var edit  = new EditAsset();\n\n"],"names":["let","this","shortcut","const","row"],"mappings":"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"}